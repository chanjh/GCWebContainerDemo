(()=>{var e={2:(e,t)=>{"use strict";t.__esModule=!0;var n=function n(){};t.default=n},929:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r.throw(e))}catch(e){i(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(o=c.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};t.__esModule=!0;var i=n(669),c=n(241);t.default=function callback(e){var callbackFunc=function(){var t=parseInt("".concat(1e4*Math.random()+0),10),n=window.gc._config.global;return"".concat(n,"_").concat(e.replaceAll(".",""),"_callback_func_").concat(t)};function _initCallback(e){window[e]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];window.gc._config.global;t.unlock(n[0]),delete window[e]}}var t=new c.default;return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return r(this,void 0,void 0,(function(){var r,a;return o(this,(function(o){switch(o.label){case 0:return _initCallback(r=callbackFunc()),a=JSON.parse(JSON.stringify(n)),(t=new c.default).lock(),[4,(0,i.default)("".concat(e),a,r)];case 1:return o.sent(),[4,t.status];case 2:return[2,o.sent()]}}))}))}}},978:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r.throw(e))}catch(e){i(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(o=c.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};t.__esModule=!0;var i=n(241);t.default=function wrapCallback(e,t,n){return r(this,void 0,void 0,(function(){var r,c,a;return o(this,(function(o){switch(o.label){case 0:return r=function(){var t=parseInt("".concat(1e4*Math.random()+0),10),n=window.gc._config.global;return"".concat(n,"_").concat(e.replaceAll(".",""),"_callback_func_").concat(t)},c=new i.default,a=r(),console.log(a,e),function _initCallback(e){window[e]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];window.gc._config.global,n&&n(t[0]),c.unlock(t[0]),console.log("delete callback:",e),delete window[e]}}(a),c.lock(),t(a),[4,c.status];case 1:return[2,o.sent()]}}))}))}},206:(e,t)=>{"use strict";t.__esModule=!0;t.default={bridgeName:"invoke",global:"gc",services:{util:{contextMenu:["clear"],test:["testMethod"]},runtime:{system:{lifecyle:{app:["willopen"]}},test:["testMethod"]}}}},302:(e,t,n)=>{"use strict";t.__esModule=!0;var r=n(727),o=function(){function EventCenter(){this.listeners={}}return EventCenter.prototype.subscribe=function(e,t){var n=this.listeners,r=n[e];r||(r=[]),r.push(t),n[e]=r},EventCenter.prototype.publish=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.listeners,o=r[e];if(o)for(var i=0,c=o;i<c.length;i++){var a=c[i];a.apply(void 0,t)}},EventCenter}();t.default=o,(0,r.default)("eventCenter",new o)},238:(e,t)=>{"use strict";t.__esModule=!0;var n=function n(){};t.default=n},669:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r.throw(e))}catch(e){i(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(o=c.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};t.__esModule=!0,t.jsbridge=void 0;var i=n(978);function invoker(e,t,n){return r(this,void 0,void 0,(function(){var r,i,c;return o(this,(function(o){switch(o.label){case 0:return r=t,t||(r={}),i={action:e,params:r,callback:n},c=window.gc._config.bridgeName,[4,window.webkit.messageHandlers[c].postMessage(i)];case 1:return o.sent(),[2]}}))}))}t.default=invoker,t.jsbridge=function jsbridge(e,t,n){return r(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,(0,i.default)(e,(function(n){return invoker(e,t,n)}),n)];case 1:return[2,r.sent()]}}))}))}},357:(e,t,n)=>{"use strict";t.__esModule=!0;var r=n(238),o=n(2),i=n(206);t.default=function launcher(e){var t=e;e||(t=i.default);var c=t.global;window["".concat(c)]=new r.default,window["".concat(c)].bridge=new o.default,window.gc._config=t,n(302)}},241:(e,t)=>{"use strict";t.__esModule=!0;var n=function(){function Lock(){this.status=new Promise((function(e){e(!0)}))}return Lock.prototype.lock=function(){var e=this;this.status=new Promise((function(t){e.callback=t}))},Lock.prototype.unlock=function(e){this.callback(e)},Lock}();t.default=n},727:(e,t)=>{"use strict";t.__esModule=!0,t.default=function register(e,t){var n=window.gc._config.global;window[n].bridge[e]=t}},523:(e,t,n)=>{"use strict";t.__esModule=!0,t.injectService=void 0;var r=n(274);function injectService(e){if(e.__esModule){var t=e.default.namespace,n=window.gc._config.global,r=window[n].bridge;t.split(".").forEach((function(e){r[e]||(r[e]=new Object),r=r[e]})),Object.getOwnPropertyNames(e.default.prototype).forEach((function(t){"constructor"===t||t.startsWith("native_")||(r[t]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=new e.default;return o[t](n)})}))}}t.default=function loadAllServices(){var e=window.gc._config.services,t=window.gc._config.global;!function parseService(e,t,n){if(Array.isArray(e))return e;Object.keys(e).forEach((function(o){var i=0==t.length?o:"".concat(t,".").concat(o);n[o]=Object();var c=parseService(e[o],i,n[o]);if(c){var a=new r.default({name:o,bridge:i,methods:c});n[o]=a}}))}(e,"",window[t].bridge),function loadDefaultServices(){var e=n(294);e.keys().forEach((function(t){injectService(e(t))}))}()},t.injectService=injectService},274:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r.throw(e))}catch(e){i(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(o=c.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};t.__esModule=!0,t.wrapFunction=void 0;var i=n(669),c=n(241);function wrapFunction(e,t,n){var callbackFunc=function(){var t=parseInt("".concat(1e4*Math.random()+0),10),n=window.gc._config.global;return"".concat(n,"_").concat(e,"_callback_func_").concat(t)};function _initCallback(e){window[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];window.gc._config.global;a.unlock(t[0]),delete window[e]}}var a=new c.default;return function(){for(var e=[],u=0;u<arguments.length;u++)e[u]=arguments[u];return r(this,void 0,void 0,(function(){var r,u;return o(this,(function(o){switch(o.label){case 0:return _initCallback(r=callbackFunc()),u=JSON.parse(JSON.stringify(e)),(a=new c.default).lock(),[4,(0,i.default)("".concat(t,".").concat(n),u,r)];case 1:return o.sent(),[4,a.status];case 2:return[2,o.sent()]}}))}))}}t.wrapFunction=wrapFunction;var a=function(){function ServiceWrapper(e){this.serviceInfo=e,this._initMethods()}return ServiceWrapper.prototype._initMethods=function(){var e=this;this.serviceInfo.methods.forEach((function(t){if("constructor"!==t){var n=e.serviceInfo,r=n.name,o=n.bridge;e[t]=wrapFunction(r,o,t)}}))},ServiceWrapper}();t.default=a},338:()=>{},613:()=>{},991:()=>{},20:()=>{},935:()=>{},294:(e,t,n)=>{var r={"./chrome.js":338,"./runtime/installed.js":613,"./runtime/runtime.js":991,"./runtime/system.js":20,"./runtime/test.js":935};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(r)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=294}},t={};function __webpack_require__(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__(357),__webpack_require__(523),__webpack_require__(727),__webpack_require__(929),__webpack_require__(238)})();
//# sourceMappingURL=jsbridge.js.map